# Phase 1 상세 실행 계획(SSOT)

Phase 1의 목표는 **오디션 핵심 플로우를 완성**하는 것이다.
이 문서는 실행 가능한 작업 단위로 분해해, 개발 중 우선순위를 흔들리지 않게 한다.

## 범위
- 오디션 공고 생성/수정/게시
- 지원자 지원(유튜브 영상 기반)
- 심사 단계 이동/합격/불합격/히스토리
- 최소 RBAC(AGENCY_MEMBER / APPLICANT / HQ_ADMIN)

## 비범위
- 결제(Stripe) 실제 연동
- 도메인 콘텐츠 번역 파이프라인
- 피드백/칼럼 기능

## 작업 스트림

### 1) RBAC 최소 구현
#### 목표
- API 접근 권한과 도메인 권한을 분리하고 일관된 규칙으로 통제

#### 작업 항목
- JWT 클레임 스펙 확정(userId, roles, agencyId optional)
- 게이트웨이/서비스 권한 체크 기준 정리
- 역할별 접근 가능한 엔드포인트 정의

#### 완료 조건
- 역할별 접근 테스트 통과

---

### 2) 오디션 심사 단계 가변화
#### 목표
- 1차~3차를 하드코딩하지 않고 단계 정의 데이터를 기반으로 운영

#### 작업 항목
- `AuditionStage` 모델/테이블 설계
- Application의 현재 단계 참조 규칙 정의
- 단계 이동 유스케이스(검증/히스토리 저장) 구현

#### 완료 조건
- 단계 수 변경 시 코드 수정 없이 동작

---

### 3) 오디션/지원 API 계약 확정
#### 목표
- 에러 포맷/응답 구조/버전 규칙 확정

#### 작업 항목
- 공통 에러 포맷 SSOT 정의
- 오디션/지원 API 스펙 문서화(OpenAPI/SSOT)

#### 완료 조건
- 프론트/백엔드/문서 계약 일치

---

### 4) 오디션 공고 플로우
#### 목표
- 기획사 공고 생성 → 수정 → 게시/마감

#### 작업 항목
- 공고 상태 전이 규칙 정의(WRITING/ONGOING/FINISHED 등)
- 수정 권한(소유자/관리자) 검증

#### 완료 조건
- 공고 상태 전이 시나리오 테스트 통과

---

### 5) 지원자 지원 플로우
#### 목표
- 유튜브 영상 기반 지원

#### 작업 항목
- 지원 요청 검증(중복/마감/상태)
- 지원 히스토리 기록

#### 완료 조건
- 동일 오디션 중복 지원 제한 동작

---

### 6) 테스트/회귀
#### 목표
- 핵심 플로우 테스트가 비즈니스 동작을 설명하도록 구성

#### 작업 항목
- 서비스 단위 테스트 보강
- 최소 E2E(행복 경로) 시나리오 정의

#### 완료 조건
- `mvn -f backend/pom.xml test` 통과

## 실행 순서(권장)
1. RBAC 최소 구현
2. 심사 단계 가변화
3. API 계약 확정
4. 공고 플로우
5. 지원 플로우
6. 테스트/회귀

